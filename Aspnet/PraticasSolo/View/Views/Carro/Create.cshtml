@model View.models.Carro

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="@(Url.Content("~/vendor/bootstrap/css/bootstrap.min.css"))" />
        <link rel="stylesheet" href="@(Url.Content("~/css/style.css"))" />
    </head>
    <body>
        <!-- Navbar Section -->
        <section>
            <nav class="shadow navbar navbar-expand-md p-1" style="background-color: var(--CorBase5); position:relative;">
                <div class="container-fluid mx-2 d-flex align-items-center justify-content-between w-100 gap-2">
                    
                    <div class="d-flex align-items-center gap-3">
                        <!-- Botão hamburguer -->
                        <button class="btn btn-sm navbar-toggler p-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <i class="fa-solid fa-bars" style="color: var(--CorFontePadrao);"></i>
                        </button>
            
                        <!-- logo -->
                        <a class="navbar-brand p-0 m-0" href="#">
                            <img src="@(Url.Content("~/images/Logo-example.png"))" alt="Logo" class="logo" />
                        </a>
                    </div>

                    <div class="ms-auto" style="position: absolute; right: 0; padding-right: 1rem;">
                        <a href="@Url.Action("Index", "Carro")">
                            <i class="fa-solid fa-arrow-left-long" style="color: var(--CorFontePadrao);"></i>
                        </a>
                    </div>

                    <!-- Itens do navbar -->
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="@Url.Action("Index", "Carro")" style="color: var(--CorFontePadrao);">Inicio</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="@Url.Action("Create", "Carro")" style="color: var(--CorFontePadrao);">Adicionar</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>  
        </section>

        <!--Form Section-->
        <section>
            <div class="container-fluid mt-4 pb-4">
                <fieldset class="container rounded-4 pb-4 shadow" style="background-color: var(--CorBase2);">
                    <legend class="mt-2" style="color:var(--CorFontePadrao);">Adicionar Novo Carro</legend>
                    <form class="row g-3" asp-action="Create" method="post" enctype="multipart/form-data" style="color: var(--CorFontePadrao);">
                        <div class="col-12 col-md-5 shadow">
                            <label asp-for="Nome" class="form-label">Nome</label>
                            <input asp-for="Nome" class="form-control" />
                        </div>
                        <div class="col-6 col-md-4 shadow">
                            <label asp-for="Preco" class="form-label">Preço</label>
                            <input asp-for="Preco" type="text" placeholder="R$ 0,00" step="0.01" class="form-control money" />
                        </div>
                        <div class="col-6 col-md-3  shadow">
                            <label asp-for="Marca" class="form-label">Marca</label>
                            <input asp-for="Marca" class="form-control" />
                        </div>
                        <div class="col-6 col-md-4 shadow">
                            <label asp-for="Ano" class="form-label">Ano de lançamento</label>
                            <input asp-for="Ano" class="form-control" />
                        </div>
                        <div class="col-6 col-md-5 shadow">
                            <label asp-for="Chassis" class="form-label">Chassis</label>
                            <input asp-for="Chassis" class="form-control" />
                        </div>
                        <div class="col-6 col-md-3 shadow">
                            <label asp-for="PrimeiraAparicao" class="form-label">Primeira Aparição</label>
                            <input asp-for="PrimeiraAparicao" type="date" class="form-control" />
                        </div>
                        <div class="col-6 col-md-3 shadow">
                            <label asp-for="Ipva" class="form-label">Valor do IPVA</label>
                            <input asp-for="Ipva" class="form-control" />
                        </div>
                        <div class="col-4 col-md-3 shadow">
                            <label asp-for="Unidades" class="form-label">Unidades</label>
                            <input asp-for="Unidades" class="form-control" />
                        </div>
                        <div class="col-4 col-md-3 shadow">
                            <label asp-for="Motor" class="form-label">Motor</label>
                            <input asp-for="Motor" class="form-control" />
                        </div>
                        <div class="col-4 col-md-3 shadow">
                            <label asp-for="Pais" class="form-label">Pais</label>
                            <input asp-for="Pais" class="form-control" />
                        </div>
                        <div class="col-12 shadow">
                            <label asp-for="Curiosidade" class="form-label">Curiosidade</label>
                            <textarea asp-for="Curiosidade" class="form-control" style="min-height: 100px; resize: vertical;"></textarea>
                        </div>
                        <div class="col-12 shadow">
                            <label asp-for="Imagem" class="form-label">Imagem</label>
                            <img class="preview" src="" alt="Pré-visualização da imagem" id="imagemPreview" />
                            <input type="file" name="imagemArquivo" class="form-control" id="imagemInput" />
                        </div>
                        <button type="submit" class="btn btn-primary">Adicionar</button>
                    </form>
                </fieldset>
            </div>  
        </section>

        <script src="@(Url.Content("~/vendor/bootstrap/js/bootstrap.bundle.min.js"))"></script>
        <script src="https://kit.fontawesome.com/d865973c5f.js" crossorigin="anonymous"></script>
        <script src="@(Url.Content("~/js/script.js"))"></script>
        <script>
            const moneyInputs = document.querySelectorAll('.money');
            const form = document.querySelector('form');

            function somenteNumeros(valor) {
                return valor.replace(/\D/g, '');
            }

            function formatarMoedaCentavos(valor) {
                if (!valor) return 'R$ 0,00';

                const numero = parseInt(valor, 10) / 100;

                return numero.toLocaleString('pt-BR', {
                    style: 'currency',
                    currency: 'BRL'
                });
            }

            moneyInputs.forEach(input => {

                // Ao digitar → formata
                input.addEventListener('input', (e) => {
                    const numeros = somenteNumeros(e.target.value);
                    e.target.value = formatarMoedaCentavos(numeros);
                });

                // Ao focar → cursor vai pro final
                input.addEventListener('focus', () => {
                    setTimeout(() => {
                        input.selectionStart = input.selectionEnd = input.value.length;
                    }, 0);
                });
            });

            // Antes de enviar → limpa tudo
            form.addEventListener('submit', () => {
                moneyInputs.forEach(input => {
                    input.value = input.value
                        .replace(/\D/g, '')
                        .replace(/^0+/, '') / 100;
                });
            });
        </script>
    </body>
</html>